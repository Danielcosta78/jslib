/**
* MegaAnimX v1.2.2 - Complete Chainable Animation Library
* 
* @license MIT
* @author Danny78 JSLib
* @version 1.2.2
* @description Chainable animation library with support for multiple elements,
* 2D/3D transformations, predefined effects, callbacks and much more.
*/ class MegaAnimXCore{constructor(t){this.elements="string"==typeof t?Array.from(document.querySelectorAll(t)):Array.isArray(t)?t:[t],this.queue=Promise.resolve(),this.defaultDuration=400,this.defaultEasing="ease",this.running=!0,this.startTime=null,this.endTime=null,this.animationId=0}_enqueue(t,e){return this.running&&(this.queue=this.queue.then(()=>new Promise(s=>{let r=++this.animationId;this.startTime=performance.now(),this.elements.forEach(e=>{e.setAttribute("data-megaanimx-id",r),t(e)}),setTimeout(()=>{this.endTime=performance.now(),s()},e??this.defaultDuration)}))),this}_setStyle(t,e,s){return this._enqueue(r=>{Object.assign(r.style,{transition:`all ${e??this.defaultDuration}ms ${s??this.defaultEasing}`,...t})},e)}duration(t){return this.defaultDuration=t,this}easing(t){return this.defaultEasing=t,this}fade(t,e){return this._setStyle({opacity:t},e)}scale(t,e){return this._setStyle({transform:`scale(${t})`},e)}scaleX(t,e){return this._setStyle({transform:`scaleX(${t})`},e)}scaleY(t,e){return this._setStyle({transform:`scaleY(${t})`},e)}rotate(t,e){return this._setStyle({transform:`rotate(${t}deg)`},e)}translate(t,e,s){return this._setStyle({transform:`translate(${"string"==typeof t?t:t+"px"}, ${"string"==typeof e?e:e+"px"})`},s)}move(t,e,s){return this._setStyle({left:`${t}px`,top:`${e}px`,position:"relative"},s)}skew(t,e,s){return this._setStyle({transform:`skew(${t}deg, ${e}deg)`},s)}rotateX(t,e){return this._setStyle({transform:`rotateX(${t}deg)`},e)}rotateY(t,e){return this._setStyle({transform:`rotateY(${t}deg)`},e)}rotateZ(t,e){return this._setStyle({transform:`rotateZ(${t}deg)`},e)}perspective(t,e){return this._setStyle({perspective:t},e)}transformOrigin(t,e){return this._setStyle({transformOrigin:t},e)}blur(t,e){return this._setStyle({filter:`blur(${t}px)`},e)}shadow(t,e){return this._setStyle({boxShadow:t},e)}border(t,e){return this._setStyle({border:t},e)}round(t,e){return this._setStyle({borderRadius:t},e)}glow(t,e){return this.shadow(`0 0 10px ${t}`,e)}bg(t,e){return this._setStyle({backgroundColor:t},e)}color(t,e){return this._setStyle({color:t},e)}font(t,e){return this._setStyle({fontFamily:t},e)}size(t,e,s){return this._setStyle({width:"string"==typeof t?t:`${t}px`,height:"string"==typeof e?e:`${e}px`},s)}text(t,e){return this._enqueue(e=>{e.textContent=t},e)}html(t,e){return this._enqueue(e=>{e.innerHTML=t},e)}bounce(t=500){return this.scale(1.2,t/4).scale(.9,t/4).scale(1.1,t/4).scale(1,t/4)}pulse(t=500){return this.scale(1.1,t/2).scale(1,t/2)}shake(t=500){return this.translate(-10,0,t/5).translate(10,0,t/5).translate(-10,0,t/5).translate(10,0,t/5).translate(0,0,t/5)}flip(t=600){return this.rotateY(90,t/2).rotateY(0,t/2)}flash(t=300){return this.opacity(0,t/3).opacity(1,t/3).opacity(0,t/3).opacity(1,t/3)}show(t){return this._setStyle({display:"block",opacity:1},t)}hide(t){return this._setStyle({opacity:0},t).then(t=>{t.style.display="none"})}toggle(t){return this._enqueue(e=>{"none"===window.getComputedStyle(e).display?this.show(t):this.hide(t)},0)}strokeWidth(t,e){return this._setStyle({strokeWidth:t},e)}strokeDashoffset(t,e){return this._setStyle({strokeDashoffset:t},e)}fill(t,e){return this._setStyle({fill:t},e)}stroke(t,e){return this._setStyle({stroke:t},e)}pauseTransitions(){return this.elements.forEach(t=>{t.style.transition="none"}),this}resumeTransitions(t,e){return this.elements.forEach(s=>{s.style.transition=`all ${t??this.defaultDuration}ms ${e??this.defaultEasing}`}),this}resetStyles(){return this._enqueue(t=>t.style="",0)}onStart(t){return this._enqueue(e=>t(e),0)}onEnd(t){return this.queue=this.queue.then(()=>{this.elements.forEach(e=>t(e))}),this}on(t,e){return"complete"===t?this.onEnd(e):(this.elements.forEach(s=>{s.addEventListener(t,()=>e(s))}),this)}off(t,e){return this.elements.forEach(s=>{s.removeEventListener(t,e)}),this}wait(t){return this._enqueue(()=>{},t)}measure(){return this.startTime=performance.now(),this.queue=this.queue.then(()=>{this.endTime=performance.now()}),this}getDuration(){return this.endTime&&this.startTime?this.endTime-this.startTime:0}keyframes(t,e,s){let r=document.createElement("style");return r.innerHTML=`@keyframes ${t} { ${e} }`,document.head.appendChild(r),this._setStyle({animation:`${t} ${s??this.defaultDuration}ms`},s)}then(t){return this.queue=this.queue.then(()=>{this.elements.forEach(e=>t(e))}),this}loop(t=1/0){let e=0,s=this.queue,r=()=>{e<t&&(e++,this.queue=s.then(()=>{this.elements.forEach(t=>{let e=t.cloneNode(!0);t.replaceWith(e),this.elements=this.elements.map(s=>s===t?e:s)}),this.queue=Promise.resolve(),this.running=!0,r()}))};return r(),this}stop(){return this.running=!1,this.elements.forEach(t=>{t.style.transition="none"}),this}cloneTo(t){let e=new MegaAnimXCore(t);return e.queue=this.queue,e}custom(t,e){return this._setStyle(t,e)}static registerEffect(t,e){MegaAnimXCore.prototype[t]=function(...t){return e(this,...t)}}}const MegaAnimX=t=>new MegaAnimXCore(t);MegaAnimX.registerEffect("slideInLeft",function(t=500){return this.translate("-100%",0,0).show(0).translate(0,0,t)}),MegaAnimX.registerEffect("slideInRight",function(t=500){return this.translate("100%",0,0).show(0).translate(0,0,t)}),"undefined"!=typeof window&&(window.MegaAnimX=MegaAnimX,window.MegaAnimXCore=MegaAnimXCore),"undefined"!=typeof module&&module.exports&&(module.exports=MegaAnimX);
